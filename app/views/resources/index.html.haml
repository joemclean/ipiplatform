.row
  -if current_user
    .btn.pull-right

  %h1
    Resources
  %hr
.row
  .col-sm-3.resource_filters
    %h3
      Filters
    =form_tag(filter_path, method: "post") do |f|
      =text_field_tag :value_proposition, nil, id: 'value_proposition', class: 'form-control', placeholder: "Value proposition search"
    .search_title
      Value Proposition
    .value_proposition_filter_box
      -@value_proposition.each do |value_proposition|
        = image_tag value_proposition.image_name, size: '50x50', class: 'value_proposition_filter', title: value_proposition.name
    .search_title

  .col-sm-9
    =paginate @resources
    - @resources.each do |resource|
      .well.container{id: "resource_#{resource.id}"}
        .col-sm-4
          =link_to (image_tag resource.image_name, id: "resource_image_#{resource.id}", size: '100x100'), resource_path(resource)
        .col-sm-8
          %h3
            = link_to resource.name, resource, id: "resource_name_#{resource.id}"
          %p
            -resource.tags.each do |tag|
              =link_to tag.name, tag_path(tag), class: 'tag_tag'
          %p
            Source:
            = resource.source
          %p
            =resource.description
          %p

          -resource.value_propositions.each do |value_proposition|
            =link_to (image_tag value_proposition.image_name, size: '40x40'), value_proposition_path(value_proposition)
          %br
          %br
          .manipulate_resource
            - if current_user.can_edit_and_delete_resource?(current_user, resource)
              .btn-group
                .btn.btn-default
                  = link_to 'Edit this Resource', edit_resource_path(resource), id: "edit_resource_#{resource.id}"
                .btn.btn-default
                  = link_to 'Delete this Resource', resource, method: :delete, data: { confirm: 'Are you sure?' }, id: "delete_resource_#{resource.id}"
  %hr
